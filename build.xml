<project name="clj-android" default="all">
  <property file="build.properties"/>

  <property name="src" location="src"/>
  <property name="build" location="classes"/>
  <property name="clojure-jar" location="${clojure-dir}/clojure.jar"/>
  <property name="clj-android-jar" location="clj-android.jar"/>

  <target name="init" depends="clean">
    <tstamp/>
    <mkdir dir="${build}"/>
  </target>

  <target name="compile" depends="init"
          description="Compile Clojure sources.">
    <java classname="clojure.lang.Compile"
          classpath="${clojure-jar}:${android-jar}:${build}:${src}"
          failonerror="true">
      <sysproperty key="clojure.compile.path" value="${build}"/>
      <arg value="clj-android"/>
    </java>
  </target>

  <target name="jar" depends="compile"
          description="Create clj-android jar file.">
    <jar jarfile="${clj-android-jar}" basedir="${build}" />
  </target>

  <target name="clean"
          description="Remove autogenerated files and directories.">
    <delete dir="${build}"/>
  </target>

  <target name="all" depends="jar" />
</project>
